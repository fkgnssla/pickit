image: 8.10.1-jdk21

stages:
  - build

before_script:
  - cd /home/ubuntu/PickIt/S11P21A309
  - git pull origin release  

build_Core:
  stage: build
  script:
    - cd /home/ubuntu/PickIt/S11P21A309/Backend/Core
    - chmod +x ./gradlew
    - ./gradlew clean build -x test
    - sh ~/core/core-deploy.sh
    - sh ~/contract.sh # 임시
  only:
    - release
  tags:
    - backend
    
build_VoteProcessor:
  stage: build
  script:
    - cd /home/ubuntu/PickIt/S11P21A309/Backend/VoteProcessor
    - chmod +x ./gradlew
    - ./gradlew clean build -x test
    - sh ~/vote/vote-deploy.sh
  only:
    - release
  tags:
    - backend
